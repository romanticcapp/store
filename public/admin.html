<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Admin Panel</title>

<style>

body{
margin:0;
font-family:system-ui;
background:linear-gradient(135deg,#02140a,#06361d);
color:white;
}

/* LOGIN */

.login{
display:flex;
justify-content:center;
align-items:center;
height:100vh;
flex-direction:column;
gap:10px;
}

input,textarea{
padding:10px;
border-radius:10px;
border:none;
width:250px;
}

button{
padding:10px;
border:none;
border-radius:10px;
background:#00ff88;
font-weight:bold;
cursor:pointer;
}

.panel{
display:none;
padding:20px;
}

.tabs{
display:flex;
gap:10px;
margin-bottom:20px;
}

.tabBtn{
background:#044d2c;
}

.active{
background:#00ff88;
color:black;
}

.productCard{
background:#083d24;
padding:10px;
border-radius:10px;
margin:10px 0;
}

img{
width:60px;
border-radius:8px;
}

</style>
</head>
<body>

<!-- LOGIN -->

<div class="login" id="login">

<h2>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§Ø¯Ù…Ù†</h2>

<input id="code" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙˆØ¯">

<button onclick="login()">Ø¯Ø®ÙˆÙ„</button>

</div>



<!-- PANEL -->

<div class="panel" id="panel">

<div class="tabs">
<button class="tabBtn active" onclick="openTab('add')">ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù†</button>
<button class="tabBtn" onclick="openTab('products')">ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
</div>



<!-- ADD PRODUCT -->

<div id="add">

<h2>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h2>

<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">

<input id="price" placeholder="Ø§Ù„Ø³Ø¹Ø±">

<input id="discount" placeholder="Ø§Ù„Ø®ØµÙ… %">

<input id="stock" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹">

<textarea id="desc" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬"></textarea>

<input type="file" id="images" multiple>

<button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ©</button>

</div>



<!-- PRODUCTS -->

<div id="products" style="display:none"></div>

</div>



<script>

// LOGIN

function login(){

fetch("/admin-login",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
code:document.getElementById("code").value
})
})
.then(res=>res.json())
.then(data=>{

if(data.success){

document.getElementById("login").style.display="none";
document.getElementById("panel").style.display="block";

loadProducts();

}else{
alert("Ø§Ù„ÙƒÙˆØ¯ ØºÙ„Ø·");
}

});

}



// TABS

function openTab(tab){

document.getElementById("add").style.display="none";
document.getElementById("products").style.display="none";

document.getElementById(tab).style.display="block";

}



// ADD PRODUCT

function addProduct(){

const files=document.getElementById("images").files;

if(files.length>8){
alert("Ø§Ù„Ø­Ø¯ Ø§Ù„Ø§Ù‚ØµÙ‰ 8 ØµÙˆØ±");
return;
}

let images=[];

for(let file of files){

images.push(URL.createObjectURL(file));

}

fetch("/api/products",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({

name:document.getElementById("name").value,
price:document.getElementById("price").value,
discount:document.getElementById("discount").value,
stock:document.getElementById("stock").value,
description:document.getElementById("desc").value,
images

})
})
.then(()=>{

alert("ØªÙ… Ø§Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ ğŸ”¥");

loadProducts();

});

}



// LOAD PRODUCTS

function loadProducts(){

fetch("/api/products")
.then(res=>res.json())
.then(data=>{

const box=document.getElementById("products");

box.innerHTML="<h2>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>";

data.forEach(p=>{

box.innerHTML+=`

<div class="productCard">

<img src="${p.images[0]}">

<b>${p.name}</b> - ${p.price} Ø¬Ù†ÙŠÙ‡

<button onclick="deleteProduct(${p.id})">
Ø­Ø°Ù
</button>

</div>

`;

});

});

}



// DELETE

function deleteProduct(id){

fetch("/api/products/"+id,{
method:"DELETE"
})
.then(()=>loadProducts());

}

</script>

</body>
  </html>
